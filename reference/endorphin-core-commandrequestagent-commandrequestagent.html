<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>CommandRequestAgent - Endorphin.Core</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content=""/>
    <meta name="author" content="University of Warwick EPR and Diamond group"/>

    <script src="https://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="https://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet"/>

    <link type="text/css" rel="stylesheet" href="/Endorphin.Core/content/style.css" />
    <script type="text/javascript" src="/Endorphin.Core/content/tips.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li><a href="http://fsharp.org">fsharp.org</a></li>
          <li><a href="http://github.com/anton-pt/Endorphin.Core">github page</a></li>
        </ul>
        <h3 class="muted"><a href="/Endorphin.Core/index.html">Endorphin.Core</a></h3>
      </div>
      <hr />
      <div class="row">
        <div class="span9" id="main">
          



<h1>CommandRequestAgent</h1>
<p>
  <span>Namespace: Endorphin.Core</span><br />
  <span>Parent Module: <a href="endorphin-core-commandrequestagent.html">CommandRequestAgent</a></span>
</p>
<div class="xmldoc">
<p>Functions for creating and interacting with a generic command/request agent with error
handling used to serialise posted commands and requests which are defined by asynchronous
workflows.</p>

</div>

<!-- Render nested types and modules, if there are any -->

  <h3>Functions and values</h3>
  <table class="table table-bordered member-list">
    <thead>
      <tr><td>Function or value</td><td>Description</td></tr>
    </thead>
    <tbody>
      <tr>
        <td class="member-name">

          <code onmouseout="hideTip(event, '1', 1)" onmouseover="showTip(event, '1', 1)">
            close(closeFunc agent)
          </code>
          <div class="tip" id="1">
            <strong>Signature:</strong> closeFunc:(&#39;?7326 -&gt; Choice&lt;unit,exn&gt;) -&gt; agent:CommandRequestAgent&lt;&#39;?7326&gt; -&gt; Async&lt;unit&gt;<br />
                          <strong>Type parameters:</strong> '?7326          </div>
        </td>
        <td class="xmldoc">
            <a href="http://github.com/anton-pt/Endorphin.Core/tree/master/src/Endorphin.Core/CommandRequestAgent.fs#L183-183" class="github-link">
              <img src="../content/img/github.png" class="normal" />
              <img src="../content/img/github-blue.png" class="hover" />
            </a>
          <p>Shuts down the message-processing agent after calling the given closing function with the
agent handle. If failure occurs during this process, the enclosed exception is raised.
An exception will also be raised if there are any remaining messages in the queue at this point.</p>


        </td>
      </tr>
      <tr>
        <td class="member-name">

          <code onmouseout="hideTip(event, '2', 2)" onmouseover="showTip(event, '2', 2)">
            closeAsync(closeBuilder arg2)
          </code>
          <div class="tip" id="2">
            <strong>Signature:</strong> closeBuilder:(&#39;?7324 -&gt; Async&lt;Choice&lt;unit,exn&gt;&gt;) -&gt; CommandRequestAgent&lt;&#39;?7324&gt; -&gt; Async&lt;unit&gt;<br />
                          <strong>Type parameters:</strong> '?7324          </div>
        </td>
        <td class="xmldoc">
            <a href="http://github.com/anton-pt/Endorphin.Core/tree/master/src/Endorphin.Core/CommandRequestAgent.fs#L173-173" class="github-link">
              <img src="../content/img/github.png" class="normal" />
              <img src="../content/img/github-blue.png" class="hover" />
            </a>
          <p>Shuts down the message-processing agent after performing the given closing async workflow with the
agent handle. If failure occurs during this process, the enclosed exception is raised.
An exception will also be raised if there are any remaining messages in the queue at this point.</p>


        </td>
      </tr>
      <tr>
        <td class="member-name">

          <code onmouseout="hideTip(event, '3', 3)" onmouseover="showTip(event, '3', 3)">
            create(nameFunc init)
          </code>
          <div class="tip" id="3">
            <strong>Signature:</strong> nameFunc:(&#39;Handle -&gt; string) -&gt; init:(unit -&gt; Async&lt;Choice&lt;&#39;Handle,exn&gt;&gt;) -&gt; Async&lt;CommandRequestAgent&lt;&#39;Handle&gt;&gt;<br />
                          <strong>Type parameters:</strong> 'Handle          </div>
        </td>
        <td class="xmldoc">
            <a href="http://github.com/anton-pt/Endorphin.Core/tree/master/src/Endorphin.Core/CommandRequestAgent.fs#L54-54" class="github-link">
              <img src="../content/img/github.png" class="normal" />
              <img src="../content/img/github-blue.png" class="hover" />
            </a>
          <p>Asynchronously starts a new command/request agent with the given name (function of
the handle, used for logging purposes) and initialisation workflow. The initialisation
may fail, in which case this workflow will return failure. Furthermore, the processing
of any given message may fail.</p>


        </td>
      </tr>
      <tr>
        <td class="member-name">

          <code onmouseout="hideTip(event, '4', 4)" onmouseover="showTip(event, '4', 4)">
            performCommand(...)
          </code>
          <div class="tip" id="4">
            <strong>Signature:</strong> description:string -&gt; commandFunc:(&#39;?7310 -&gt; Choice&lt;unit,exn&gt;) -&gt; agent:CommandRequestAgent&lt;&#39;?7310&gt; -&gt; Async&lt;unit&gt;<br />
                          <strong>Type parameters:</strong> '?7310          </div>
        </td>
        <td class="xmldoc">
            <a href="http://github.com/anton-pt/Endorphin.Core/tree/master/src/Endorphin.Core/CommandRequestAgent.fs#L115-115" class="github-link">
              <img src="../content/img/github.png" class="normal" />
              <img src="../content/img/github-blue.png" class="hover" />
            </a>
          <p>Posts a command to the message queue which will be executed by calling the provided
function with the agent handle. If failure occurs, the enclosed exception is raised.
The provided description is used for logging.</p>


        </td>
      </tr>
      <tr>
        <td class="member-name">

          <code onmouseout="hideTip(event, '5', 5)" onmouseover="showTip(event, '5', 5)">
            performCommandAsync(...)
          </code>
          <div class="tip" id="5">
            <strong>Signature:</strong> description:string -&gt; commandBuilder:(&#39;?7308 -&gt; Async&lt;Choice&lt;unit,exn&gt;&gt;) -&gt; CommandRequestAgent&lt;&#39;?7308&gt; -&gt; Async&lt;unit&gt;<br />
                          <strong>Type parameters:</strong> '?7308          </div>
        </td>
        <td class="xmldoc">
            <a href="http://github.com/anton-pt/Endorphin.Core/tree/master/src/Endorphin.Core/CommandRequestAgent.fs#L105-105" class="github-link">
              <img src="../content/img/github.png" class="normal" />
              <img src="../content/img/github-blue.png" class="hover" />
            </a>
          <p>Posts a command to the message queue which will be executed by performing the given
async workflow with the agent handle. If failure occurs, the enclosed exception is
raised. The provided description is used for logging.</p>


        </td>
      </tr>
      <tr>
        <td class="member-name">

          <code onmouseout="hideTip(event, '6', 6)" onmouseover="showTip(event, '6', 6)">
            performObjectRequest(...)
          </code>
          <div class="tip" id="6">
            <strong>Signature:</strong> description:string -&gt; requestFunc:(&#39;Handle -&gt; Choice&lt;&#39;Result,exn&gt;) -&gt; agent:CommandRequestAgent&lt;&#39;Handle&gt; -&gt; Async&lt;&#39;Result&gt;<br />
                          <strong>Type parameters:</strong> 'Handle, 'Result          </div>
        </td>
        <td class="xmldoc">
            <a href="http://github.com/anton-pt/Endorphin.Core/tree/master/src/Endorphin.Core/CommandRequestAgent.fs#L139-139" class="github-link">
              <img src="../content/img/github.png" class="normal" />
              <img src="../content/img/github-blue.png" class="hover" />
            </a>
          <p>Posts a request to the message queue which will be executed by calling the provided
function with the agent handle. If the request is successful, the object is returned.
If failure occurs, the enclosed exception is raised. The provided description is used
for logging.</p>


        </td>
      </tr>
      <tr>
        <td class="member-name">

          <code onmouseout="hideTip(event, '7', 7)" onmouseover="showTip(event, '7', 7)">
            performObjectRequestAsync(...)
          </code>
          <div class="tip" id="7">
            <strong>Signature:</strong> description:string -&gt; requestBuilder:(&#39;Handle -&gt; Async&lt;Choice&lt;&#39;Result,exn&gt;&gt;) -&gt; CommandRequestAgent&lt;&#39;Handle&gt; -&gt; Async&lt;&#39;Result&gt;<br />
                          <strong>Type parameters:</strong> 'Handle, 'Result          </div>
        </td>
        <td class="xmldoc">
            <a href="http://github.com/anton-pt/Endorphin.Core/tree/master/src/Endorphin.Core/CommandRequestAgent.fs#L123-123" class="github-link">
              <img src="../content/img/github.png" class="normal" />
              <img src="../content/img/github-blue.png" class="hover" />
            </a>
          <p>Posts a request to the message queue which will be executed by performing the given
async workflow with the agent handle. If the request is successful, the object is returned.
If failure occurs, the enclosed exception is raised. The provided description is used
for logging.</p>


        </td>
      </tr>
      <tr>
        <td class="member-name">

          <code onmouseout="hideTip(event, '8', 8)" onmouseover="showTip(event, '8', 8)">
            performValueRequest(...)
          </code>
          <div class="tip" id="8">
            <strong>Signature:</strong> description:string -&gt; requestFunc:(&#39;Handle -&gt; Choice&lt;&#39;Result,exn&gt;) -&gt; agent:CommandRequestAgent&lt;&#39;Handle&gt; -&gt; Async&lt;&#39;Result&gt;<br />
                          <strong>Type parameters:</strong> 'Handle, 'Result          </div>
        </td>
        <td class="xmldoc">
            <a href="http://github.com/anton-pt/Endorphin.Core/tree/master/src/Endorphin.Core/CommandRequestAgent.fs#L165-165" class="github-link">
              <img src="../content/img/github.png" class="normal" />
              <img src="../content/img/github-blue.png" class="hover" />
            </a>
          <p>Posts a request to the message queue which will be executed by calling the provided
function with the agent handle. If the request is successful, the value is returned. If
failure occurs, the enclosed exception is raised. The provided description is used for
logging.</p>


        </td>
      </tr>
      <tr>
        <td class="member-name">

          <code onmouseout="hideTip(event, '9', 9)" onmouseover="showTip(event, '9', 9)">
            performValueRequestAsync(...)
          </code>
          <div class="tip" id="9">
            <strong>Signature:</strong> description:string -&gt; requestBuilder:(&#39;Handle -&gt; Async&lt;Choice&lt;&#39;Result,exn&gt;&gt;) -&gt; CommandRequestAgent&lt;&#39;Handle&gt; -&gt; Async&lt;&#39;Result&gt;<br />
                          <strong>Type parameters:</strong> 'Handle, 'Result          </div>
        </td>
        <td class="xmldoc">
            <a href="http://github.com/anton-pt/Endorphin.Core/tree/master/src/Endorphin.Core/CommandRequestAgent.fs#L148-148" class="github-link">
              <img src="../content/img/github.png" class="normal" />
              <img src="../content/img/github-blue.png" class="hover" />
            </a>
          <p>Posts a request to the message queue which will be executed by performing the given async
workflow with the agent handle. If the request is successful, the value is returned. If
failure occurs, the enclosed exception is raised. The provided description is used for
logging.</p>


        </td>
      </tr>
    </tbody>
  </table>

        </div>
        <div class="span3">
          <img src="/Endorphin.Core/img/logo.png" alt="F# Project" style="width:150px;margin:10px" />  
          <ul class="nav nav-list" id="menu" style="margin-top: 20px;">
            <li class="nav-header">Endorphin.Core</li>
            <li><a href="/Endorphin.Core/index.html">Home page</a></li>
            <li class="divider"></li>
            <li><a href="http://nuget.org/packages/Endorphin.Core">Get Library via NuGet</a></li>
            <li><a href="http://github.com/anton-pt/Endorphin.Core">Source Code on GitHub</a></li>
            <li><a href="/Endorphin.Core/license.html">License</a></li>
            <li><a href="/Endorphin.Core/release-notes.html">Release Notes</a></li>
            
            <li class="nav-header">Getting started</li>
            <li><a href="/Endorphin.Core/tutorial.html">Sample tutorial</a></li>

            <li class="nav-header">Documentation</li>
            <li><a href="/Endorphin.Core/reference/index.html">API Reference</a></li>
          </ul>
        </div>
      </div>
    </div>
    <a href="http://github.com/anton-pt/Endorphin.Core"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"/></a>
  </body>
  </html>
